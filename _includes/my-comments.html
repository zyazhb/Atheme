{% assign disqus = site.disqus | default:site.disqus_shortname %}
{% if disqus %}
<div id="disqus_thread"></div>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments
    powered by Disqus.</a></noscript>
<script>!function (w, d) {
    if (d.getElementById("disqus_thread")) {
      if (w.DISQUS) {
        w.DISQUS.reset({
          reload: true,
          config() {
            this.page.url = w.location.href;
            this.page.title = d.title;
          },
        });
      } else {
        w.disqus_config = function disqusConfig() {
          this.page.url = w.location.href;
          this.page.title = d.title;
        };
        w.loadJSDeferred(d.getElementById("_hrefDisqus").href + '/embed.js');
      }
    }
  }(window, document);</script>
{% endif %}

{% if site.gitalk %}
<div id="gitalk-container"></div>
<script>
  gitalk = new Gitalk({
    clientID: '{{site.gitalk.clientID}}',
    clientSecret: '{{site.gitalk.clientSecret}}',
    repo: '{{site.gitalk.repo}}',
    owner: '{{site.gitalk.owner}}',
    admin: ['{{site.gitalk.admin}}'],
    id: location.pathname,
    distractionFreeMode: true
  });
  gitalk.render('gitalk-container');
</script>
{% endif %}